(function(){"use strict";var t={979:function(t,e,n){var i=n(144),s=n(629),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("MainPage",{ref:"main"})],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row",attrs:{id:"pos"}},[n("div",{staticClass:"col-md-8 col-md-offset-2"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("transaction-view",{attrs:{items:t.currentItems},on:{remove:t.removeItem,edit:t.toggleEdit,pay:t.pay,clear:t.clear}})],1),n("div",{staticClass:"col-md-6"},[n("item-list",{attrs:{items:t.items},on:{add:t.addItem}})],1)])])]),t.hasBill?n("div",{staticClass:"bill-container"},[n("h2",[t._v("Bill:")]),n("pre",{staticClass:"print-container"},[t._v(t._s(t.bill))])]):t._e()])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-container"},[n("h1",{staticClass:"h1-flex"},[t._v("Point of Sale")])])}];const c={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_SERVER_URL?{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_SERVER_URL:window.location.origin,u={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,POST,OPTIONS","Access-Control-Allow-Headers":"Content-Type","Content-Type":"application/json"};function d(t,e,n){const i=fetch(t,{method:"POST",body:JSON.stringify(n),headers:e});return i.then((t=>t))}function m(t,e){const n=fetch(t,{method:"GET",headers:e});return n.then((t=>t))}var f={async pay(t){return d(`${c}/api/pay`,u,t)},async items(){return m(`${c}/api/items`,u)},async types(){return m(`${c}/api/types`,u)}},p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-group"},t._l(t.items,(function(e){return n("button",{key:e.id,staticClass:"list-group-item item",on:{click:function(n){return t.add(e)}}},[n("strong",[t._v(t._s(e.name))]),t._v(" - "+t._s(t.currency(e.price))+" ")])})),0)},h=[],y={toCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}},v={name:"ItemList",props:{items:{type:Array,required:!0}},data:()=>({}),methods:{add(t){this.$emit("add",t)},currency(t){return y.toCurrency(t)}}},b=v,_=n(1),g=(0,_.Z)(b,p,h,!1,null,"48530c1b",null),I=g.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.items.length?n("table",{staticClass:"table table-striped table-hover table-bordered table-responsive"},[t._m(0),n("tbody",t._l(t.items,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.item.name))]),n("td",{on:{dblclick:function(n){return t.toggleEdit(e)}}},[e.editing?t._e():n("span",[t._v(t._s(e.numberOfItems))]),e.editing?n("input",{directives:[{name:"model",rawName:"v-model",value:e.numberOfItems,expression:"item.numberOfItems"}],staticClass:"form-control",attrs:{type:"number",min:"1"},domProps:{value:e.numberOfItems},on:{blur:function(n){return t.toggleEdit(e)},input:function(n){n.target.composing||t.$set(e,"numberOfItems",n.target.value)}}}):t._e()]),n("td",[t._v(t._s(t.currency(e.numberOfItems*e.item.price)))]),n("td",[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){return t.removeItem(e)}}},[n("i",{staticClass:"fa fa-times"})])])])})),0)]):t._e(),t.items.length?t._e():n("p",[t._v("No items have been added.")]),n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[t._v("Subtotal:")]),n("td",[t._v(t._s(t.currency(t.subtotal)))])]),n("tr",[n("td",[t._v("Tax:")]),n("td",[t._v(t._s(t.currency(t.tax)))])]),n("tr",[n("td",[t._v("Total:")]),n("td",[t._v(t._s(t.currency(t.total)))])])])]),n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn btn-success transaction-btn",attrs:{type:"button"},on:{click:t.pay}},[t._v(" Pay ")]),n("button",{staticClass:"btn btn-warning transaction-btn",attrs:{type:"button"},on:{click:t.clear}},[t._v(" Clear ")])])])},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Name")]),n("th",[t._v("Number of Items")]),n("th",[t._v("Amount")]),n("th")])])}],w={name:"TransactionView",components:{},props:{items:{type:Array,required:!0}},data:()=>({}),computed:{subtotal(){let t=0;return this.items.forEach((function(e){t+=e.item.price*e.numberOfItems})),t},tax(){return.1495*this.subtotal},total(){return this.subtotal+this.tax}},methods:{toggleEdit(t){t.editing=!t.editing},removeItem(t){this.$emit("remove",t)},currency(t){return y.toCurrency(t)},pay(){this.$emit("pay",this.total)},clear(){this.$emit("clear")}}},E=w,P=(0,_.Z)(E,C,O,!1,null,"0cc1f006",null),S=P.exports,T={name:"MainPage",title:"Retail Edge POS",components:{ItemList:I,TransactionView:S},props:{},data:()=>({items:[],lineItems:[],storeTypes:[],printedBill:null}),computed:{currentItems(){return[...this.lineItems]},bill(){return this.printedBill},hasBill(){return!!this.bill}},async created(){await this.loadStoreTypes(),await this.loadItems()},methods:{async loadStoreTypes(){const t=await f.types();if(200!==t.status&&204!==t.status)return void this.notifyFailure("Failed to load store types!");const e=await t.json();this.storeTypes=e.reduce(((t,e)=>[{value:e},...t]),[])},async loadItems(){const t=await f.items();if(200!==t.status&&204!==t.status)return void this.notifyFailure("Failed to load items!");const e=await t.json();this.items=e.reduce(((t,e)=>(t=[e,...t],t)),[])},addItem(t){let e=!1;for(let n=0;n<this.lineItems.length;n++)if(this.lineItems[n].item===t){this.lineItems[n].numberOfItems++,e=!0;break}e||this.lineItems.push({item:t,numberOfItems:1,editing:!1})},removeItem(t){for(let e=0;e<this.lineItems.length;e++)if(this.lineItems[e]===t){this.lineItems.splice(e,1);break}},toggleEdit(t){t.editing=!t.editing},async pay(t){if(0==this.lineItems.length)return void this.notifyWarning("No items in cart!");const e=this.lineItems.reduce(((t,e)=>(t=[{itemId:e.item.id,itemCount:e.numberOfItems},...t],t)),[]),n={paidAmount:t,type:"CASH",items:e},i=await f.pay(n);if(200!==i.status&&204!==i.status)return void this.notifyFailure("Payment API failed!");const s=await i.json();"SUCCESS"===s.status?(this.notifySuccess("Payment successfull!"),this.printedBill=s.printedBill,setTimeout((()=>{this.clearBill()}),3e3)):this.notifyFailure("Payment attempt failed!")},clear(){this.lineItems=[],this.clearBill()},clearBill(){this.printedBill=null},notifySuccess(t){this.notify(t,"success")},notifyWarning(t){this.notify(t,"default")},notifyFailure(t){this.notify(t,"error")},notify(t,e){this.$toast.open({message:t,type:e,position:"top",duration:1500})}}},A=T,$=(0,_.Z)(A,o,l,!1,null,"3f320690",null),x=$.exports,k={name:"App",components:{MainPage:x},data:()=>({})},B=k,j=(0,_.Z)(B,r,a,!1,null,null,null),N=j.exports,F=n(32);function R(t){const{title:e}=t.$options;if(e)return"function"===typeof e?e.call(t):e}var U={created(){const t=R(this);t&&(document.title=t)}},V=n(9),M=n.n(V);n(44),n(682);i["default"].use(s.ZP),i["default"].use(F.ZPm),i["default"].use(M()),i["default"].mixin(U),i["default"].config.productionTip=!1,new i["default"]({render:t=>t(N)}).$mount("#app")}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,i,s,r){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],s=t[u][1],r=t[u][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(o=!1,r<a&&(a=r));if(o){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[i,s,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,r,a=i[0],o=i[1],l=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)var u=l(n)}for(e&&e(i);c<a.length;c++)r=a[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},i=self["webpackChunkui"]=self["webpackChunkui"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(979)}));i=n.O(i)})();
//# sourceMappingURL=app.6eace14a.js.map